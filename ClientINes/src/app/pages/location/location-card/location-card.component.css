:host { display: block; }

/* Сама колонка */
.location-column { 
  background: #dddcdc; 
  border-radius: 16px; 
  width: 310px; 
  flex-shrink: 0; 
  border-top: 5px solid #007bff; 
  display: flex; 
  flex-direction: column; 
  padding: 12px; 
  margin-bottom: 24px;
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.04);
  transition: all 0.3s ease;
  border: 1px solid rgba(0,0,0,0.03);
  position: relative; /* Важно для работы z-index внутри */
  z-index: 1; 
}

/* КЛЮЧЕВОЙ МОМЕНТ: если меню открыто, поднимаем всю карточку над соседями */
.location-column:has(.menu) {
  z-index: 100;
}

.location-column:hover {
  transform: translateY(-2px);
  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
}

/* Шапка */
.loc-header { 
  padding: 4px 4px 12px 4px; 
  display: flex; 
  align-items: center; 
  justify-content: space-between; 
}

.title-group { 
  display: flex; 
  align-items: center; 
  gap: 10px; 
  cursor: grab; 
  flex-grow: 1; 
}

.icon-wrapper {
  width: 36px;
  height: 36px;
  border-radius: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.name-stack h3 { 
  margin: 0; 
  font-size: 0.95rem; 
  color: #1a202c; 
  font-weight: 700; 
}

.item-count { font-size: 0.75rem; color: #a0aec0; }

/* Кнопка меню */
.menu-btn {
  background: #cccdce;
  border: 1px solid #edf2f7;
  color: #4a5568;
  cursor: pointer;
  width: 32px;
  height: 32px;
  border-radius: 8px;
  transition: 0.2s;
}

.menu-btn:hover, .menu-btn.active { 
  background: #edf2f7; 
  color: #007bff; 
}

/* ВЫПАДАЮЩЕЕ МЕНЮ */
.menu { 
  position: absolute; 
  top: 50px; 
  right: 0; 
  background: rgba(255, 255, 255, 0.98); 
  backdrop-filter: blur(12px);
  border-radius: 14px; 
  z-index: 9999; /* Чтобы было поверх вложенных карточек */
  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25); 
  padding: 8px; 
  min-width: 220px;
  border: 1px solid rgba(0,0,0,0.08);
  animation: menuIn 0.2s ease-out;
}

@keyframes menuIn {
  from { opacity: 0; transform: translateY(-10px) scale(0.95); }
  to { opacity: 1; transform: translateY(0) scale(1); }
}

/* Стили внутри меню */
.menu-header { padding: 8px 12px; font-size: 0.7rem; color: #a0aec0; font-weight: 800; text-transform: uppercase; }
.menu-section { padding: 8px 12px; }
.menu-section label { font-size: 0.7rem; color: #718096; margin-bottom: 6px; display: block; }
.select-wrapper select { width: 100%; padding: 8px; border-radius: 8px; border: 1px solid #edf2f7; background: #f8fafc; font-size: 0.85rem; }

.divider { height: 1px; background: #f1f5f9; margin: 6px 8px; }

.menu-actions button { 
  display: flex; align-items: center; gap: 10px; width: 100%; padding: 10px; 
  background: none; border: none; cursor: pointer; border-radius: 8px; font-size: 0.85rem; color: #4a5568;
}

.menu-actions button:hover { background: #f7fafc; color: #007bff; }
.delete-btn { color: #e53e3e !important; }

/* Предметы */
.items-container { min-height: 40px; padding: 4px; background: #fcfcfd; border-radius: 12px; margin-top: 8px; }
.item-card { background: white; padding: 12px; margin-bottom: 8px; border-radius: 12px; border: 1px solid #f1f5f9; display: flex; align-items: center; gap: 10px; font-size: 0.85rem; }
.item-dot { width: 6px; height: 6px; border-radius: 50%; }

/* Вложенность */
.children { 
  padding-left: 16px; 
  margin-top: 12px; 
  border-left: 2px solid #f1f5f9; 
}